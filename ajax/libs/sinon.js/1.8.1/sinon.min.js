"use strict";var sinon=(function(h){var j=typeof document!="undefined"&&document.createElement("div");var k=Object.prototype.hasOwnProperty;function v(x){var y=false;try{x.appendChild(j);y=j.parentNode==x}catch(w){return false}finally{try{x.removeChild(j)}catch(w){}}return y}function m(e){return j&&e&&e.nodeType===1&&v(e)}function b(e){return typeof e==="function"||!!(e&&e.constructor&&e.call&&e.apply)}function i(w,e){for(var x in e){if(!k.call(w,x)){w[x]=e[x]}}}function r(e){return typeof e==="function"&&typeof e.restore==="function"&&e.restore.sinon}var t={wrapMethod:function f(y,z,B){if(!y){throw new TypeError("Should wrap property of object")}if(typeof B!="function"){throw new TypeError("Method wrapper should be function")}var e=y[z],x;if(!b(e)){x=new TypeError("Attempted to wrap "+(typeof e)+" property "+z+" as function")}if(e.restore&&e.restore.sinon){x=new TypeError("Attempted to wrap "+z+" which is already wrapped")}if(e.calledBefore){var A=!!e.returns?"stubbed":"spied on";x=new TypeError("Attempted to wrap "+z+" which is already "+A)}if(x){if(e._stack){x.stack+="\n--------------\n"+e._stack}throw x}var w=y.hasOwnProperty?y.hasOwnProperty(z):k.call(y,z);y[z]=B;B.displayName=z;B._stack=(new Error("Stack Trace for original")).stack;B.restore=function(){if(!w){delete y[z]}if(y[z]===B){y[z]=e}};B.restore.sinon=true;i(B,e);return B},extend:function s(x){for(var w=1,e=arguments.length;w<e;w+=1){for(var y in arguments[w]){if(arguments[w].hasOwnProperty(y)){x[y]=arguments[w][y]}if(arguments[w].hasOwnProperty("toString")&&arguments[w].toString!=x.toString){x.toString=arguments[w].toString}}}return x},create:function g(w){var e=function(){};e.prototype=w;return new e()},deepEqual:function c(x,e){if(t.match&&t.match.isMatcher(x)){return x.test(e)}if(typeof x!="object"||typeof e!="object"){return x===e}if(m(x)||m(e)){return x===e}if(x===e){return true}if((x===null&&e!==null)||(x!==null&&e===null)){return false}var w=Object.prototype.toString.call(x);if(w!=Object.prototype.toString.call(e)){return false}if(w=="[object Date]"){return x.valueOf()===e.valueOf()}var A,y=0,z=0;if(w=="[object Array]"&&x.length!==e.length){return false}for(A in x){y+=1;if(!c(x[A],e[A])){return false}}for(A in e){z+=1}return y==z},functionName:function u(w){var e=w.displayName||w.name;if(!e){var x=w.toString().match(/function ([^\s\(]+)/);e=x&&x[1]}return e},functionToString:function n(){if(this.getCall&&this.callCount){var e,x,w=this.callCount;while(w--){e=this.getCall(w).thisValue;for(x in e){if(e[x]===this){return x}}}}return this.displayName||"sinon fake"},getConfig:function(w){var e={};w=w||{};var x=t.defaultConfig;for(var y in x){if(x.hasOwnProperty(y)){e[y]=w.hasOwnProperty(y)?w[y]:x[y]}}return e},format:function(e){return""+e},defaultConfig:{injectIntoThis:true,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:true,useFakeServer:true},timesInWords:function d(e){return e==1&&"once"||e==2&&"twice"||e==3&&"thrice"||(e||0)+" times"},calledInOrder:function(x){for(var w=1,e=x.length;w<e;w++){if(!x[w-1].calledBefore(x[w])||!x[w].called){return false}}return true},orderByFirstCall:function(e){return e.sort(function(y,w){var x=y.getCall(0);var A=w.getCall(0);var B=x&&x.callId||-1;var z=A&&A.callId||-1;return B<z?-1:1})},log:function(){},logError:function(e,w){var x=e+" threw exception: ";t.log(x+"["+w.name+"] "+w.message);if(w.stack){t.log(w.stack)}setTimeout(function(){w.message=x+w.message;throw w},0)},typeOf:function(w){if(w===null){return"null"}else{if(w===undefined){return"undefined"}}var e=Object.prototype.toString.call(w);return e.substring(8,e.length-1).toLowerCase()},createStubInstance:function(e){if(typeof e!=="function"){throw new TypeError("The constructor should be a function.")}return t.stub(t.create(e.prototype))},restore:function(e){if(e!==null&&typeof e==="object"){for(var w in e){if(r(e[w])){e[w].restore()}}}else{if(r(e)){e.restore()}}}};var o=typeof module!=="undefined"&&module.exports;var l=typeof define==="function"&&typeof define.amd==="object"&&define.amd;if(l){define(function(){return t})}else{if(o){try{h=require("formatio")}catch(q){}module.exports=t;module.exports.spy=require("./sinon/spy");module.exports.spyCall=require("./sinon/call");module.exports.behavior=require("./sinon/behavior");module.exports.stub=require("./sinon/stub");module.exports.mock=require("./sinon/mock");module.exports.collection=require("./sinon/collection");module.exports.assert=require("./sinon/assert");module.exports.sandbox=require("./sinon/sandbox");module.exports.test=require("./sinon/test");module.exports.testCase=require("./sinon/test_case");module.exports.assert=require("./sinon/assert");module.exports.match=require("./sinon/match")}}if(h){var p=h.configure({quoteStrings:false});t.format=function(){return p.ascii.apply(p,arguments)}}else{if(o){try{var a=require("util");t.format=function(e){return typeof e=="object"&&e.toString===Object.prototype.toString?a.inspect(e):e}}catch(q){}}}return t}(typeof formatio=="object"&&formatio));