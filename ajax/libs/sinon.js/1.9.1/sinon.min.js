"use strict";var sinon=(function(h){var j=typeof document!="undefined"&&document.createElement("div");var k=Object.prototype.hasOwnProperty;function w(y){var z=false;try{y.appendChild(j);z=j.parentNode==y}catch(x){return false}finally{try{y.removeChild(j)}catch(x){}}return z}function m(e){return j&&e&&e.nodeType===1&&w(e)}function b(e){return typeof e==="function"||!!(e&&e.constructor&&e.call&&e.apply)}function p(e){return typeof e==="number"&&isNaN(e)}function i(x,e){for(var y in e){if(!k.call(x,y)){x[y]=e[y]}}}function s(e){return typeof e==="function"&&typeof e.restore==="function"&&e.restore.sinon}var u={wrapMethod:function f(z,A,C){if(!z){throw new TypeError("Should wrap property of object")}if(typeof C!="function"){throw new TypeError("Method wrapper should be function")}var e=z[A],y;if(!b(e)){y=new TypeError("Attempted to wrap "+(typeof e)+" property "+A+" as function")}if(e.restore&&e.restore.sinon){y=new TypeError("Attempted to wrap "+A+" which is already wrapped")}if(e.calledBefore){var B=!!e.returns?"stubbed":"spied on";y=new TypeError("Attempted to wrap "+A+" which is already "+B)}if(y){if(e._stack){y.stack+="\n--------------\n"+e._stack}throw y}var x=z.hasOwnProperty?z.hasOwnProperty(A):k.call(z,A);z[A]=C;C.displayName=A;C._stack=(new Error("Stack Trace for original")).stack;C.restore=function(){if(!x){delete z[A]}if(z[A]===C){z[A]=e}};C.restore.sinon=true;i(C,e);return C},extend:function t(y){for(var x=1,e=arguments.length;x<e;x+=1){for(var z in arguments[x]){if(arguments[x].hasOwnProperty(z)){y[z]=arguments[x][z]}if(arguments[x].hasOwnProperty("toString")&&arguments[x].toString!=y.toString){y.toString=arguments[x].toString}}}return y},create:function g(x){var e=function(){};e.prototype=x;return new e()},deepEqual:function c(y,e){if(u.match&&u.match.isMatcher(y)){return y.test(e)}if(typeof y!="object"||typeof e!="object"){if(p(y)&&p(e)){return true}else{return y===e}}if(m(y)||m(e)){return y===e}if(y===e){return true}if((y===null&&e!==null)||(y!==null&&e===null)){return false}if(y instanceof RegExp&&e instanceof RegExp){return(y.source===e.source)&&(y.global===e.global)&&(y.ignoreCase===e.ignoreCase)&&(y.multiline===e.multiline)}var x=Object.prototype.toString.call(y);if(x!=Object.prototype.toString.call(e)){return false}if(x=="[object Date]"){return y.valueOf()===e.valueOf()}var B,z=0,A=0;if(x=="[object Array]"&&y.length!==e.length){return false}for(B in y){z+=1;if(!c(y[B],e[B])){return false}}for(B in e){A+=1}return z==A},functionName:function v(x){var e=x.displayName||x.name;if(!e){var y=x.toString().match(/function ([^\s\(]+)/);e=y&&y[1]}return e},functionToString:function n(){if(this.getCall&&this.callCount){var e,y,x=this.callCount;while(x--){e=this.getCall(x).thisValue;for(y in e){if(e[y]===this){return y}}}}return this.displayName||"sinon fake"},getConfig:function(x){var e={};x=x||{};var y=u.defaultConfig;for(var z in y){if(y.hasOwnProperty(z)){e[z]=x.hasOwnProperty(z)?x[z]:y[z]}}return e},format:function(e){return""+e},defaultConfig:{injectIntoThis:true,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:true,useFakeServer:true},timesInWords:function d(e){return e==1&&"once"||e==2&&"twice"||e==3&&"thrice"||(e||0)+" times"},calledInOrder:function(y){for(var x=1,e=y.length;x<e;x++){if(!y[x-1].calledBefore(y[x])||!y[x].called){return false}}return true},orderByFirstCall:function(e){return e.sort(function(z,x){var y=z.getCall(0);var B=x.getCall(0);var C=y&&y.callId||-1;var A=B&&B.callId||-1;return C<A?-1:1})},log:function(){},logError:function(e,x){var y=e+" threw exception: ";u.log(y+"["+x.name+"] "+x.message);if(x.stack){u.log(x.stack)}setTimeout(function(){x.message=y+x.message;throw x},0)},typeOf:function(x){if(x===null){return"null"}else{if(x===undefined){return"undefined"}}var e=Object.prototype.toString.call(x);return e.substring(8,e.length-1).toLowerCase()},createStubInstance:function(e){if(typeof e!=="function"){throw new TypeError("The constructor should be a function.")}return u.stub(u.create(e.prototype))},restore:function(e){if(e!==null&&typeof e==="object"){for(var x in e){if(s(e[x])){e[x].restore()}}}else{if(s(e)){e.restore()}}}};var o=typeof module!=="undefined"&&module.exports;var l=typeof define==="function"&&typeof define.amd==="object"&&define.amd;if(l){define(function(){return u})}else{if(o){try{h=require("formatio")}catch(r){}module.exports=u;module.exports.spy=require("./sinon/spy");module.exports.spyCall=require("./sinon/call");module.exports.behavior=require("./sinon/behavior");module.exports.stub=require("./sinon/stub");module.exports.mock=require("./sinon/mock");module.exports.collection=require("./sinon/collection");module.exports.assert=require("./sinon/assert");module.exports.sandbox=require("./sinon/sandbox");module.exports.test=require("./sinon/test");module.exports.testCase=require("./sinon/test_case");module.exports.assert=require("./sinon/assert");module.exports.match=require("./sinon/match")}}if(h){var q=h.configure({quoteStrings:false});u.format=function(){return q.ascii.apply(q,arguments)}}else{if(o){try{var a=require("util");u.format=function(e){return typeof e=="object"&&e.toString===Object.prototype.toString?a.inspect(e):e}}catch(r){}}}return u}(typeof formatio=="object"&&formatio));