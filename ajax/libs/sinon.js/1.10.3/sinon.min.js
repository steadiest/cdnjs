"use strict";var sinon=(function(i){var k=typeof document!="undefined"&&document.createElement("div");var l=Object.prototype.hasOwnProperty;function x(z){var A=false;try{z.appendChild(k);A=k.parentNode==z}catch(y){return false}finally{try{z.removeChild(k)}catch(y){}}return A}function n(e){return k&&e&&e.nodeType===1&&x(e)}function b(e){return typeof e==="function"||!!(e&&e.constructor&&e.call&&e.apply)}function q(e){return typeof e==="number"&&isNaN(e)}function j(y,e){for(var z in e){if(!l.call(y,z)){y[z]=e[z]}}}function t(e){return typeof e==="function"&&typeof e.restore==="function"&&e.restore.sinon}var v={wrapMethod:function f(A,B,D){if(!A){throw new TypeError("Should wrap property of object")}if(typeof D!="function"){throw new TypeError("Method wrapper should be function")}var e=A[B],z;if(!b(e)){z=new TypeError("Attempted to wrap "+(typeof e)+" property "+B+" as function")}else{if(e.restore&&e.restore.sinon){z=new TypeError("Attempted to wrap "+B+" which is already wrapped")}else{if(e.calledBefore){var C=!!e.returns?"stubbed":"spied on";z=new TypeError("Attempted to wrap "+B+" which is already "+C)}}}if(z){if(e&&e._stack){z.stack+="\n--------------\n"+e._stack}throw z}var y=A.hasOwnProperty?A.hasOwnProperty(B):l.call(A,B);A[B]=D;D.displayName=B;D._stack=(new Error("Stack Trace for original")).stack;D.restore=function(){if(!y){delete A[B]}if(A[B]===D){A[B]=e}};D.restore.sinon=true;j(D,e);return D},extend:function u(z){for(var y=1,e=arguments.length;y<e;y+=1){for(var A in arguments[y]){if(arguments[y].hasOwnProperty(A)){z[A]=arguments[y][A]}if(arguments[y].hasOwnProperty("toString")&&arguments[y].toString!=z.toString){z.toString=arguments[y].toString}}}return z},create:function h(y){var e=function(){};e.prototype=y;return new e()},deepEqual:function c(z,e){if(v.match&&v.match.isMatcher(z)){return z.test(e)}if(typeof z!="object"||typeof e!="object"){if(q(z)&&q(e)){return true}else{return z===e}}if(n(z)||n(e)){return z===e}if(z===e){return true}if((z===null&&e!==null)||(z!==null&&e===null)){return false}if(z instanceof RegExp&&e instanceof RegExp){return(z.source===e.source)&&(z.global===e.global)&&(z.ignoreCase===e.ignoreCase)&&(z.multiline===e.multiline)}var y=Object.prototype.toString.call(z);if(y!=Object.prototype.toString.call(e)){return false}if(y=="[object Date]"){return z.valueOf()===e.valueOf()}var C,A=0,B=0;if(y=="[object Array]"&&z.length!==e.length){return false}for(C in z){A+=1;if(!(C in e)){return false}if(!c(z[C],e[C])){return false}}for(C in e){B+=1}return A==B},functionName:function w(y){var e=y.displayName||y.name;if(!e){var z=y.toString().match(/function ([^\s\(]+)/);e=z&&z[1]}return e},functionToString:function o(){if(this.getCall&&this.callCount){var e,z,y=this.callCount;while(y--){e=this.getCall(y).thisValue;for(z in e){if(e[z]===this){return z}}}}return this.displayName||"sinon fake"},getConfig:function(y){var e={};y=y||{};var z=v.defaultConfig;for(var A in z){if(z.hasOwnProperty(A)){e[A]=y.hasOwnProperty(A)?y[A]:z[A]}}return e},format:function(e){return""+e},defaultConfig:{injectIntoThis:true,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:true,useFakeServer:true},timesInWords:function d(e){return e==1&&"once"||e==2&&"twice"||e==3&&"thrice"||(e||0)+" times"},calledInOrder:function(z){for(var y=1,e=z.length;y<e;y++){if(!z[y-1].calledBefore(z[y])||!z[y].called){return false}}return true},orderByFirstCall:function(e){return e.sort(function(A,y){var z=A.getCall(0);var C=y.getCall(0);var D=z&&z.callId||-1;var B=C&&C.callId||-1;return D<B?-1:1})},log:function(){},logError:function(e,y){var z=e+" threw exception: ";v.log(z+"["+y.name+"] "+y.message);if(y.stack){v.log(y.stack)}setTimeout(function(){y.message=z+y.message;throw y},0)},typeOf:function(y){if(y===null){return"null"}else{if(y===undefined){return"undefined"}}var e=Object.prototype.toString.call(y);return e.substring(8,e.length-1).toLowerCase()},createStubInstance:function(e){if(typeof e!=="function"){throw new TypeError("The constructor should be a function.")}return v.stub(v.create(e.prototype))},restore:function(e){if(e!==null&&typeof e==="object"){for(var y in e){if(t(e[y])){e[y].restore()}}}else{if(t(e)){e.restore()}}}};var p=typeof module!=="undefined"&&module.exports&&typeof require=="function";var m=typeof define==="function"&&typeof define.amd==="object"&&define.amd;function g(y,e,z){z.exports=v;v.spy=y("./sinon/spy");v.spyCall=y("./sinon/call");v.behavior=y("./sinon/behavior");v.stub=y("./sinon/stub");v.mock=y("./sinon/mock");v.collection=y("./sinon/collection");v.assert=y("./sinon/assert");v.sandbox=y("./sinon/sandbox");v.test=y("./sinon/test");v.testCase=y("./sinon/test_case");v.match=y("./sinon/match")}if(m){define(g)}else{if(p){try{i=require("formatio")}catch(s){}g(require,exports,module)}}if(i){var r=i.configure({quoteStrings:false});v.format=function(){return r.ascii.apply(r,arguments)}}else{if(p){try{var a=require("util");v.format=function(e){return typeof e=="object"&&e.toString===Object.prototype.toString?a.inspect(e):e}}catch(s){}}}return v}(typeof formatio=="object"&&formatio));